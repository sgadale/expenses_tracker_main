{% extends 'base.html' %}
{% block content %}

<h2>Dashboard</h2>

<form method="get">
    <label>Select Month:</label>
    <input type="month" name="month" value="{{ selected_month }}">
    <button type="submit">Filter</button>
</form>

<p><strong>Total Expense:</strong> â‚¹{{ total_expense }}</p>

{% if budget %}
<p><strong>Budget:</strong> â‚¹{{ budget.amount }}</p>
<p><strong>Remaining:</strong> â‚¹{{ remaining }}</p>
{% else %}
<p>No budget set</p>
{% endif %}

<a href="{% url 'add_expense' %}">âž• Add Expense</a>
<a href="{% url 'set_budget' %}">ðŸ’° Set Budget</a>

<hr>

<h3>Expenses</h3>

<table>
<tr>
    <th>Title</th>
    <th>Category</th>
    <th>Amount</th>
    <th>Date</th>
    <th>Actions</th>
</tr>

{% for expense in expenses %}
<tr>
    <td>{{ expense.title }}</td>
    <td>{{ expense.category }}</td>
    <td>â‚¹{{ expense.amount }}</td>
    <td>{{ expense.date }}</td>
    <td>
        <a href="{% url 'edit_expense' expense.id %}">Edit</a>
        <a href="{% url 'delete_expense' expense.id %}">Delete</a>
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="5">No expenses</td>
</tr>
{% endfor %}
</table>

<hr>

<h3>Category-wise Totals</h3>

<ul>
{% for item in category_totals %}
<li>{{ item.category__name }}: â‚¹{{ item.total }}</li>
{% empty %}
<li>No data</li>
{% endfor %}
</ul>

{% endblock %}
